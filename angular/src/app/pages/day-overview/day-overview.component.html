<div class="header">
  <app-header-overview (newAppointmentId)="newAppointment($event)"></app-header-overview>
</div>

<div class="dayoverview">
  <div class="day-header"
    [ngStyle]="{'grid-template-columns': widthTimeColumn + 'px ' + widthPerDay + 'px'}">
    <div class="emptytimeheader"></div>
    <div class="date">
      {{getDateName()}}
    </div>
  </div>

  <div #daygridScroll class="day-grid"
    [ngStyle]="{'grid-template-columns': widthTimeColumn + 'px ' + widthPerDay + 'px'}">

    <div class="timeColumn">
      <div *ngFor="let time of times; let isLast=last" class="time-cell" [ngStyle]="{'height.px': heightPerHour}">
        <div class="time"> {{ time }}</div>
        <div class="divider" [ngStyle]="{'height.px': dividerHeight}"></div>
        <div class="longDivider" [ngStyle]="{'height.px': dividerHeight}"></div>
        <div class="divider" [ngStyle]="{'height.px': dividerHeight}"></div>
      </div>
    </div>
    <div class="day-cell">
      <div *ngFor="let time of times; let i = index; let isLast=last" class="daylines">
        <div class="lines" [ngStyle]="{'top.px': (i) * heightPerHour, 'width.px': widthPerDay }">
        </div>
        <div class="active"
          [ngStyle]="{'top.px': getActivePosition(), 'width.px': widthPerDay}">
        </div>
      </div>

      <div class="appointments">
        <div *ngFor="let appointment of this.day?.appointments" [ngStyle]="getTaskStyle(appointment)" class="appointment">
          <ng-container *ngIf="appointment.date === day.date && !appointment.isAllDay">
            <div class="appointmentTime">
              <div class="categoryColor" [ngStyle]="{'background-color': appointment.category.color}" >
              </div>
              <div class="cardContent">
                <div class="category" [ngStyle]="{'color': appointment.category.color}" *ngIf="ShowCategory(appointment)">
                  {{ appointment.category.term }}
                </div>
                <div class="title">
                  {{ appointment.title }}
                </div>
                <div class="time">
                  {{ getFormattedTime(appointment.starttime) }} - {{ getFormattedTime(appointment.endtime) }}
                </div>
              </div>
            </div>
          </ng-container>
          <ng-container *ngIf="appointment.date === day.date && appointment.isAllDay">
            <div class="appointmentWholeDay">
              <div class="categoryColor" [ngStyle]="{'background-color': appointment.category.color}">
              </div>
              <div class="cardContent">
                <div class="title">
                  {{ appointment.title }}
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </div>
    </div>
  </div>

</div>
